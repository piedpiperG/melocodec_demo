<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeloCodec Comparison Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 40px;
            font-size: 2em;
        }

        h2 {
            color: #2c3e50;
            margin: 50px 0 30px 0;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            font-size: 1.5em;
        }

        .sample-item {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
        }

        .sample-header {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }

        .original-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .original-label {
            font-weight: bold;
            color: white;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .original-section audio {
            width: 100%;
            height: 40px;
        }

        .codecs-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .codec-block {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .codec-block:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .codec-title {
            font-weight: bold;
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            display: flex;
            align-items: center;
        }

        .codec-title::before {
            content: "üéµ";
            margin-right: 10px;
            font-size: 1.1em;
        }

        .bitrate-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .bitrate-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }

        .bitrate-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bitrate-label.high {
            color: #28a745;
        }

        .bitrate-label.low {
            color: #ffc107;
        }

        /* Pitch Shifting Styles */
        .pitch-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .pitch-label {
            font-weight: bold;
            color: white;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .pitch-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .pitch-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #f5576c;
        }

        .pitch-item-label {
            font-weight: 600;
            color: #f5576c;
            margin-bottom: 8px;
            font-size: 1em;
            letter-spacing: 0.5px;
        }

        audio {
            width: 100%;
            height: 35px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .bitrate-grid, .pitch-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ MeloCodec Comparison Demo</h1>

        <div id="loadingMessage" class="loading">Loading audio samples...</div>
        <div id="testContent"></div>
    </div>

    <script>
        // ============ Configuration ============
        const CONFIG = {
            audioPath: 'audio',
            samples: [1, 2, 3, 4, 5],
            codecs: [
                { folder: 'bwc', name: 'MeloCodec', bitrates: ['high', 'low'] },
                { folder: 'encodec', name: 'Encodec', bitrates: ['high', 'low'] },
                { folder: 'dac', name: 'DAC', bitrates: ['high', 'low'] },
                { folder: 'mucodec', name: 'MuCodec', bitrates: ['low'] },
                { folder: 'xcodec', name: 'XCodec', bitrates: ['high', 'low'] }
            ],
            pitchShifts: [
                { shift: 2, label: '+2 Semitones' },
                { shift: 4, label: '+4 Semitones' }
            ],
            audioExt: 'wav'
        };

        // ============ Load & Render ============
        function init() {
            // Codec comparison data
            const audioData = CONFIG.samples.map((id, idx) => ({
                id: id,
                index: idx + 1,
                original: `${CONFIG.audioPath}/original/${id}.${CONFIG.audioExt}`,
                codecs: CONFIG.codecs.map(codec => ({
                    name: codec.name,
                    folder: codec.folder,
                    bitrates: codec.bitrates.map(bitrate => ({
                        bitrate: bitrate,
                        path: `${CONFIG.audioPath}/${codec.folder}/${bitrate}/${id}.${CONFIG.audioExt}`
                    }))
                }))
            }));

            // Pitch shifting data
            const pitchData = CONFIG.samples.map((id, idx) => ({
                id: id,
                index: idx + 1,
                original: `${CONFIG.audioPath}/original/${id}.${CONFIG.audioExt}`,
                shifts: CONFIG.pitchShifts.map(shift => ({
                    label: shift.label,
                    path: `${CONFIG.audioPath}/pitch_shift/shifted_${shift.shift}_${id}.${CONFIG.audioExt}`
                }))
            }));

            render(audioData, pitchData);
        }

        function render(audioData, pitchData) {
            let html = '';
            
            // ========== Codec Comparison Section ==========
            html += '<h2>üéº Codec Comparison</h2>';
            
            audioData.forEach(sample => {
                html += `
                    <div class="sample-item">
                        <div class="sample-header">Sample ${sample.index}</div>
                        
                        <div class="original-section">
                            <div class="original-label">üéØ Original Audio</div>
                            <audio controls src="${sample.original}"></audio>
                        </div>

                        <div class="codecs-container">
                `;

                sample.codecs.forEach(codec => {
                    html += `
                        <div class="codec-block">
                            <div class="codec-title">${codec.name}</div>
                            <div class="bitrate-grid">
                    `;

                    codec.bitrates.forEach(b => {
                        html += `
                            <div class="bitrate-item">
                                <div class="bitrate-label ${b.bitrate}">${b.bitrate.toUpperCase()} Bitrate</div>
                                <audio controls src="${b.path}"></audio>
                            </div>
                        `;
                    });

                    html += `
                            </div>
                        </div>
                    `;
                });

                html += '</div></div>';
            });

            // ========== Pitch Shifting Section ==========
            html += '<h2>üéπ Pitch Shifting Experiment</h2>';
            
            pitchData.forEach(sample => {
                html += `
                    <div class="sample-item">
                        <div class="sample-header">Sample ${sample.index}</div>
                        
                        <div class="original-section">
                            <div class="original-label">üéØ Original Audio</div>
                            <audio controls src="${sample.original}"></audio>
                        </div>

                        <div class="pitch-section">
                            <div class="pitch-label">üéöÔ∏è Pitch Shifted Results</div>
                            <div class="pitch-grid">
                `;

                sample.shifts.forEach(shift => {
                    html += `
                        <div class="pitch-item">
                            <div class="pitch-item-label">${shift.label}</div>
                            <audio controls src="${shift.path}"></audio>
                        </div>
                    `;
                });

                html += `
                            </div>
                        </div>
                    </div>
                `;
            });

            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('testContent').innerHTML = html;
        }

        // ============ Initialize ============
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>